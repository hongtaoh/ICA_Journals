summary(model)
y_hat <- predict(model)
u <- resid(model)
s_u <- rstandard(model)
qqnorm(s_u)
qqline(s_u, col="red")
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:33, 35:36)
data <- df[, var_cols]
model <- lm(gscholar_citation_log10~., data)
summary(model)
vif(model)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
model <- lm(gscholar_citation_log10~., data)
summary(model)
vif(model)
summary(model)
ols_plot_resid_qq(model)
ols_test_correlation(model)
ols_plot_resid_hist(model)
ols_plot_resid_fit(model)
ols_coll_diag(model)
ols_plot_diagnostics(model)
library(car)
library(olsrr)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
model <- lm(gscholar_citation_log10~., data)
summary(model)
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
cutoff <- (qchisq(p = 1- alpha, df = 3))
## multivariate outliers
alpha <- 0.5
cutoff <- (qchisq(p = 1- alpha, df = 3))
View(data)
data$mahal1 <- mahalnobis(
data[c(1:18)],
colMeans(data[c(1:18)]),
cov(data[c(1:18)])
)
data$mahal1 <- mahalanobis(
data[c(1:18)],
colMeans(data[c(1:18)]),
cov(data[c(1:18)])
)
cols_to_factor <- c(1:3, 6:9, 11:17)
data[cols_to_factor] <- lapply(data[cols_to_factor], factor)
View(data)
data[cols_to_factor]
colnames(data)
colnames(data)[cols_to_factor]
data[, to_factor_col_name] <- lapply(data[, to_factor_col_name], as.factor)
## multivariate outliers
alpha <- 0.5
cutoff <- (qchisq(p = 1- alpha, df = 3))
to_factor_col_idx <- c(1:3, 6:9, 11:17)
to_factor_col_name <- colnames(data)[to_factor_col_idx]
data[, to_factor_col_name] <- lapply(data[, to_factor_col_name], as.factor)
## multivariate outliers
alpha <- 0.5
cutoff <- (qchisq(p = 1- alpha, df = 3))
to_factor_col_idx <- c(1:3, 6:9, 11:17)
to_factor_col_name <- colnames(data)[to_factor_col_idx]
data[to_factor_col_name]
data[to_factor_col_name] <- lapply(data[to_factor_col_name], factor)
data[to_factor_col_name]
charactor_vars <- lapply(data, class) == "charactor"
charactor_vars <- lapply(data, class) == "character"
character_vars <- lapply(data, class) == "character"
character_vars
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
model <- lm(gscholar_citation_log10~., data)
summary(model)
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
## multivariate outliers
alpha <- 0.5
cutoff <- (qchisq(p = 1- alpha, df = 3))
character_vars <- lapply(data, class) == "character"
character_vars
to_factor_col_idx <- c(1:3, 6:9, 11:17)
to_factor_col_name <- colnames(data)[to_factor_col_idx]
data[to_factor_col_name] <- lapply(data[to_factor_col_name], factor)
data$mahal1 <- mahalanobis(
data[c(1:18)],
colMeans(data[c(1:18)]),
cov(data[c(1:18)])
)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
model <- lm(gscholar_citation_log10~., data)
summary(model)
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
data.matrix(data)
newdata <- data.matrix(data)
View(newdata)
data[] <- data.matrix(data)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
model <- lm(gscholar_citation_log10~., data)
summary(model)
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
## multivariate outliers
alpha <- 0.5
cutoff <- (qchisq(p = 1- alpha, df = 3))
# change categorical to numeric
# https://stackoverflow.com/a/47922961
data[] <- data.matrix(data)
data$mahal1 <- mahalanobis(
data[c(1:18)],
colMeans(data[c(1:18)]),
cov(data[c(1:18)])
)
data$outlier1 <- ifelse(data$mahal1>cutoff, 1, 0)
data(data$outlier1)
data$outlier1 <- ifelse(data$mahal1>cutoff, 1, 0)
table(data$outlier1)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
model <- lm(gscholar_citation_log10~., data)
summary(model)
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
## multivariate outliers
alpha <- 0.5
cutoff <- (qchisq(p = 1- alpha, df = 3))
# change categorical to numeric
# https://stackoverflow.com/a/47922961
data[] <- data.matrix(data)
data$mahal1 <- mahalanobis(
data[c(1:18)],
colMeans(data[c(1:18)]),
cov(data[c(1:18)])
)
data$outlier1 <- ifelse(data$mahal1>cutoff, 1, 0)
table(data$outlier1)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
model <- lm(gscholar_citation_log10~., data)
summary(model)
## Normality
ols_plot_resid_qq(model)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
datanew <- subset(data, outlier0 == 0)
View(datanew)
datanew <- datanew[-c(-1)]
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
datanew <- subset(data, outlier0 == 0)
datanew$outlier0 <- NULL
datanew$gscholar_citation_log10_stdized <- NULL
model <- lm(gscholar_citation_log10~., data)
summary(model)
## Normality
ols_plot_resid_qq(model)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
datanew <- subset(data, outlier0 == 0)
datanew$outlier0 <- NULL
datanew$gscholar_citation_log10_stdized <- NULL
model <- lm(gscholar_citation_log10~., datanew)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
datanew <- subset(data, outlier0 == 0)
datanew$outlier0 <- NULL
datanew$gscholar_citation_log10_stdized <- NULL
model <- lm(gscholar_citation_log10~., datanew)
summary(model)
## Normality
ols_plot_resid_qq(model)
ols_test_correlation(model)
ols_plot_resid_hist(model)
## linearity & homoscedasticity
ols_plot_resid_fit(model)
## collinearity diagnostics
ols_coll_diag(model)
## collinearity diagnostics
# ols_coll_diag(model)
vif(model)
## all in one
ols_plot_diagnostics(model)
## Normality
ols_plot_resid_qq(model)
## linearity & homoscedasticity
ols_plot_resid_fit(model)
summary(model)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
summary(model)
library(car)
library(olsrr)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
datanew <- subset(data, outlier0 == 0)
datanew$outlier0 <- NULL
datanew$gscholar_citation_log10_stdized <- NULL
model <- lm(gscholar_citation_log10~., datanew)
summary(model)
## Normality
ols_plot_resid_qq(model)
#Correlation between observed residuals and expected residuals under normality.
ols_test_correlation(model)
ols_plot_resid_hist(model)
## linearity & homoscedasticity
ols_plot_resid_fit(model)
## collinearity diagnostics
# ols_coll_diag(model)
vif(model)
## all in one
# ## multivariate outliers
# ## multivariate outliers
# alpha <- 0.5
library(stargazer)
stargazer(model, type = "text")
library(stargazer)
stargazer(model, type = "html")
stargazer(model, type = "html", out = "figures/lm.html")
table(data$outlier0)
library(car)
library(olsrr)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
View(df)
var_cols <- c(1, 16:17, 20:28, 30:33, 35:36)
data <- df[, var_cols]
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
datanew <- subset(data, outlier0 == 0)
datanew$outlier0 <- NULL
datanew$gscholar_citation_log10_stdized <- NULL
View(datanew)
model <- lm(gscholar_citation_log10~., datanew)
summary(model)
df$first_author_country
sapply(df$first_author_country, unique)
sapply(list(df$first_author_country), unique)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
sapply(list(df$first_author_country), unique)
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:28, 30:33, 35:36)
data <- df[, var_cols]
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
datanew <- subset(data, outlier0 == 0)
datanew$outlier0 <- NULL
datanew$gscholar_citation_log10_stdized <- NULL
model <- lm(gscholar_citation_log10~., datanew)
summary(model)
## Normality
ols_plot_resid_qq(model)
#Correlation between observed residuals and expected residuals under normality.
ols_test_correlation(model)
ols_plot_resid_hist(model)
## linearity & homoscedasticity
ols_plot_resid_fit(model)
## collinearity diagnostics
# ols_coll_diag(model)
vif(model)
library(stargazer)
stargazer(model, type = "html", out = "figures/lm.html")
summary(model)
hist(data$gscholar_citation_log10)
library(car)
library(olsrr)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
len(df)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
len(df)
length(df)
df.shape
dim(df)
sapply(list(df$first_author_country), unique)
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 16:17, 20:33, 35:36)
data <- df[, var_cols]
View(data)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
dim(df)
sapply(list(df$first_author_country), unique)
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 11, 16:17, 20:33, 35:36)
data <- df[, var_cols]
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
datanew <- subset(data, outlier0 == 0)
datanew$outlier0 <- NULL
datanew$gscholar_citation_log10_stdized <- NULL
View(datanew)
df <- read.csv("../data/processed/papers_to_study_expanded.csv")
dim(df)
sapply(list(df$first_author_country), unique)
df$Year.Distance.from.2022 = abs(df$year - 2022)
df$gscholar_citation_log10 <- log10(df$gscholar_citation + 0.1)
var_cols <- c(1, 11, 16:17, 20:33, 35:36)
data <- df[, var_cols]
hist(data$gscholar_citation_log10)
data$gscholar_citation_log10_stdized <- scale(
data$gscholar_citation_log10,
center = T,
scale = T
)
data$outlier0 <- ifelse(data$gscholar_citation_log10_stdized > 3.3 |
data$gscholar_citation_log10_stdized < -3.3,
1, 0
)
table(data$outlier0)
datacheck <- subset(data, outlier0 == 1)
View(datacheck)
dim(datacheck)
dim(datanew)
install.packages("tinytex")
tinytex::install_tinytex()
install.packages("bookdown")
View(df)
